<div id="pascc_content" class="p-4">
    <!-- Required Data Table -->
    <div class="mb-6 animate-fade-in">
        <h4 class="font-bold text-md text-blue-900 mb-2">Required Data (Table 2.C.8.1)</h4>
        <div class="overflow-x-auto bg-base-100 rounded-box border shadow-sm">
            <table class="table table-sm table-zebra w-full" id="table_scc_pascc_required_data">
                <thead class="bg-blue-900 text-white">
                    <tr>
                        <th class="w-1/3">Required Data</th>
                        <th class="w-1/3">Comments</th>
                        <th class="w-1/3">Value</th>
                    </tr>
                </thead>
                <tbody id="tbody_scc_pascc_required_data">
                    <tr>
                        <td class="font-semibold">Susceptibility (Low, Medium, High)</td>
                        <td>The susceptibility is determined by expert advice or using the procedures in this section.</td>
                        <td>
                            <input type="text" id="req_pascc_susceptibility" class="input input-bordered input-sm w-full bg-gray-100" placeholder="Calculated..." readonly />
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Thermal history</td>
                        <td>Determine the thermal history of the material.</td>
                        <td>
                            <select id="req_pascc_thermal_history" class="select select-bordered select-sm w-full">
                                <option value="">Select...</option>
                                <option value="solution_annealed">Solution Annealed</option>
                                <option value="stabilized_before_welding">Stabilized Before Welding</option>
                                <option value="stabilized_after_welding">Stabilized After Welding</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Maximum operating temperature</td>
                        <td>Determine the maximum operating temperature.</td>
                        <td>
                            <div class="join w-full">
                                <input type="number" id="req_pascc_temp" class="input input-bordered input-sm join-item w-full" placeholder="e.g. 750" />
                                <select id="req_pascc_temp_unit" class="select select-bordered select-sm join-item">
                                    <option value="F">°F</option>
                                    <option value="C">°C</option>
                                </select>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Material</td>
                        <td>Select the material grade.</td>
                        <td>
                            <select id="req_pascc_material" class="select select-bordered select-sm w-full">
                                <option value="">Select...</option>
                                <option value="All regular 300 series SS and Alloys 600 and 800">All regular 300 series SS...</option>
                                <option value="H Grade 300 series SS">H Grade 300 series SS</option>
                                <option value="L Grade 300 series SS">L Grade 300 series SS</option>
                                <option value="321 SS">321 SS</option>
                                <option value="347 SS, Alloy 20, Alloy 625, all austenitic weld overlay">347 SS, Alloy 20...</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Presence of sulfides, moisture, and oxygen?</td>
                        <td>During operation? During shutdown?</td>
                        <td class="space-y-2">
                             <div class="flex items-center gap-2">
                                <span class="text-xs">Operation:</span>
                                <select id="req_pascc_exposed_operation" class="select select-bordered select-xs w-full">
                                    <option value="">Select...</option>
                                    <option value="No">No</option>
                                    <option value="Yes">Yes</option>
                                </select>
                             </div>
                             <div class="flex items-center gap-2">
                                <span class="text-xs">Shutdown:</span>
                                <select id="req_pascc_exposed_shutdown" class="select select-bordered select-xs w-full">
                                    <option value="">Select...</option>
                                    <option value="No">No</option>
                                    <option value="Yes">Yes</option>
                                </select>
                             </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Downtime protection used?</td>
                        <td>Determine whether downtime protection for PASCC has been provided.</td>
                        <td>
                            <select id="req_pascc_downtime_protection" class="select select-bordered select-sm w-full">
                                <option value="">Select...</option>
                                <option value="No">No</option>
                                <option value="Yes">Yes</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Age (years)</td>
                        <td>Use inspection history to determine the time since the last SCC inspection.</td>
                        <td>
                            <input type="text" id="req_pascc_age" class="input input-bordered input-sm w-full bg-gray-100" placeholder="Calculated..." readonly />
                        </td>
                    </tr>
                    <tr>
                        <td class="font-semibold">Number of inspections</td>
                        <td>The number of inspections in each effectiveness category.</td>
                        <td>
                            <input type="number" id="req_pascc_insp_count" class="input input-bordered input-sm w-full bg-gray-100" placeholder="Calculated..." readonly />
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="flex justify-end mt-4 mb-6">
        <button id="btn_scc_pascc_confirm_table" class="btn btn-primary btn-sm">
            <i class="fas fa-save mr-2"></i> Save & Begin Analysis
        </button>
    </div>

    <!-- Step 1: Susceptibility Determination -->
    <div id="div_scc_pascc_step1" class="mt-6 animate-fade-in hidden">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 1: Susceptibility Determination</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Determine susceptibility for cracking using the decision flow and Table 2.C.8.2.
        </div>

        <!-- Decision Flow -->
        <div class="space-y-4">
            <!-- Question 1: Cracks Present? -->
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Are cracks present?</span>
                </label>
                <select id="sel_pascc_cracks_present" class="select select-bordered select-sm w-full max-w-xs">
                    <option value="" disabled selected>Select...</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>

            <!-- Conditional: Cracks Removed? -->
            <div id="div_pascc_cracks_removed" class="hidden form-control">
                <label class="label">
                    <span class="label-text font-semibold">Have cracks been removed?</span>
                </label>
                <select id="sel_pascc_cracks_removed" class="select select-bordered select-sm w-full max-w-xs">
                    <option value="" disabled selected>Select...</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>

            <!-- Conditional: Exposed during operation? -->
            <div id="div_pascc_exposed_operation" class="hidden form-control">
                <label class="label">
                    <span class="label-text font-semibold">Exposed to S and O₂ and H₂O during operation?</span>
                </label>
                <select id="sel_pascc_exposed_operation" class="select select-bordered select-sm w-full max-w-xs">
                    <option value="" disabled selected>Select...</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>

            <!-- Conditional: Exposed during shutdown? -->
            <div id="div_pascc_exposed_shutdown" class="hidden form-control">
                <label class="label">
                    <span class="label-text font-semibold">Exposed to S and O₂ and H₂O during shutdown?</span>
                </label>
                <select id="sel_pascc_exposed_shutdown" class="select select-bordered select-sm w-full max-w-xs">
                    <option value="" disabled selected>Select...</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>

            <!-- Conditional: Table 2.C.8.2 Lookup -->
            <div id="div_pascc_table_lookup" class="hidden bg-gray-50 p-4 rounded-md">
                <h5 class="font-bold text-sm text-gray-700 mb-3">Table 2.C.8.2 - Susceptibility Criteria</h5>
                
                <!-- Operating Temperature -->
                <div class="form-control">
                    <label class="label">
                        <span class="label-text font-semibold">Maximum Operating Temperature</span>
                    </label>
                    <div class="flex gap-2 items-center">
                        <input type="number" id="inp_pascc_temp" class="input input-bordered input-sm w-32" 
                               placeholder="e.g. 750" step="1" />
                        <select id="sel_pascc_temp_unit" class="select select-bordered select-sm w-24">
                            <option value="F">°F</option>
                            <option value="C">°C</option>
                        </select>
                    </div>
                </div>

                <!-- Material -->
                <div class="form-control mt-3">
                    <label class="label">
                        <span class="label-text font-semibold">Material</span>
                    </label>
                    <select id="sel_pascc_material" class="select select-bordered select-sm w-full max-w-md">
                        <option value="" disabled selected>Select...</option>
                        <option value="All regular 300 series SS and Alloys 600 and 800">All regular 300 series SS and Alloys 600 and 800</option>
                        <option value="H Grade 300 series SS">H Grade 300 series SS</option>
                        <option value="L Grade 300 series SS">L Grade 300 series SS</option>
                        <option value="321 SS">321 SS</option>
                        <option value="347 SS, Alloy 20, Alloy 625, all austenitic weld overlay">347 SS, Alloy 20, Alloy 625, all austenitic weld overlay</option>
                    </select>
                </div>

                <!-- Thermal History -->
                <div class="form-control mt-3">
                    <label class="label">
                        <span class="label-text font-semibold">Thermal History</span>
                    </label>
                    <select id="sel_pascc_thermal_history" class="select select-bordered select-sm w-full max-w-md">
                        <option value="" disabled selected>Select...</option>
                        <option value="solution_annealed">Solution Annealed (default)</option>
                        <option value="stabilized_before_welding">Stabilized Before Welding</option>
                        <option value="stabilized_after_welding">Stabilized After Welding</option>
                    </select>
                </div>

                <!-- Calculate Button -->
                <div class="mt-4">
                    <button id="btn_pascc_calc_susceptibility" class="btn btn-primary btn-sm">
                        <i class="fas fa-calculator mr-2"></i> Calculate Susceptibility
                    </button>
                </div>
            </div>

            <!-- Conditional: Downtime Protection? -->
            <div id="div_pascc_downtime_protection" class="hidden form-control">
                <label class="label">
                    <span class="label-text font-semibold">Downtime protection used according to NACE RP 01.70?</span>
                </label>
                <select id="sel_pascc_downtime_protection" class="select select-bordered select-sm w-full max-w-xs">
                    <option value="" disabled selected>Select...</option>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>
        </div>

        <!-- Result Display -->
        <div id="div_pascc_step1_result" class="hidden mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md">
            <div class="flex items-center justify-between">
                <span class="font-bold text-gray-800">Susceptibility:</span>
                <span id="val_pascc_susceptibility" class="text-2xl font-extrabold text-blue-900">--</span>
            </div>
            <div id="msg_pascc_susceptibility_note" class="text-sm text-gray-600 mt-2 italic"></div>
        </div>
    </div>

    <!-- Step 2: Severity Index (SVI) -->
    <div id="div_scc_pascc_step2" class="hidden mt-8 mb-6">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 2: Severity Index (SVI)</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Determine the Severity Index from Table 2.C.1.2 based on the susceptibility from Step 1.
        </div>

        <div class="flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-md">
            <span class="font-bold text-gray-800">Severity Index:</span>
            <span id="val_pascc_svi" class="text-2xl font-extrabold text-blue-900">--</span>
        </div>
    </div>

    <!-- Validation Messages -->
    <div id="div_pascc_validation_msg" class="hidden mb-4 p-4 bg-red-100 text-red-700 border border-red-400 rounded-md">
        <i class="fas fa-exclamation-circle mr-2"></i>
        <span id="txt_pascc_validation_msg"></span>
    </div>

    <!-- Step 3: Time in Service -->
    <div id="div_scc_pascc_step3" class="hidden mt-8 mb-6">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 3: Time in Service</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Determine the time in service (age) since the last effective inspection.
        </div>

        <div class="form-control max-w-xs">
            <label class="label">
                <span class="label-text font-semibold">Date of Last Inspection</span>
            </label>
            <input type="date" id="inp_pascc_inspection_date" class="input input-bordered input-sm" />
        </div>

        <div id="div_scc_pascc_step3_result" class="hidden mt-2">
            <span class="text-gray-600">Calculated Age (years): </span>
            <span id="val_pascc_age" class="font-bold text-gray-800">--</span>
        </div>
    </div>

    <!-- Step 4: Inspection History -->
    <div id="div_scc_pascc_step4" class="hidden mt-8 mb-6">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 4: Inspection History</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Determine the number of inspections and the final effective inspection category.
        </div>

        <div class="grid grid-cols-2 gap-4 max-w-md">
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Category A Inspections</span>
                </label>
                <input type="number" id="inp_pascc_insp_a" class="input input-bordered input-sm" value="0" min="0" />
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Category B Inspections</span>
                </label>
                <input type="number" id="inp_pascc_insp_b" class="input input-bordered input-sm" value="0" min="0" />
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Category C Inspections</span>
                </label>
                <input type="number" id="inp_pascc_insp_c" class="input input-bordered input-sm" value="0" min="0" />
            </div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Category D Inspections</span>
                </label>
                <input type="number" id="inp_pascc_insp_d" class="input input-bordered input-sm" value="0" min="0" />
            </div>
        </div>

        <!-- Auto-calculated now, button removed -->

        <div id="div_scc_pascc_step4_result" class="hidden mt-4 p-3 bg-white border border-gray-300 rounded-md">
            <div class="font-bold text-gray-800">Final Effective Inspection (after equivalency):</div>
            <div class="text-blue-800 text-lg mt-1">
                <span id="val_pascc_final_category" class="font-bold">--</span> 
                <span class="text-sm text-gray-600">(Count: <span id="val_pascc_final_count">--</span>)</span>
            </div>
        </div>
    </div>

    <!-- Step 5: Base Damage Factor -->
    <div id="div_scc_pascc_step5" class="hidden mt-8 mb-6">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 5: Base Damage Factor</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Determine the Base Damage Factor from Table 2.C.1.3 based on Severity Index and Inspection History.
        </div>

        <div class="flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-md">
            <span class="font-bold text-gray-800">Base Damage Factor:</span>
            <span id="val_pascc_base_df" class="text-2xl font-extrabold text-blue-900">--</span>
        </div>
    </div>

    <!-- Step 6: Final Damage Factor -->
    <div id="div_scc_pascc_step6" class="hidden mt-8 mb-6">
        <h4 class="font-bold text-md text-blue-900 mb-2">Step 6: Final Damage Factor</h4>
        <div class="text-gray-700 mb-4 text-sm">
            Calculate the Final Damage Factor using Equation 2.C.7:
        </div>
        
        <div class="bg-gray-100 p-3 rounded-md font-mono text-sm text-center mb-4 border border-gray-300">
            D<sub>f</sub><sup>PASCC</sup> = min(D<sub>fB</sub><sup>PASCC</sup>, 5000)
        </div>

        <div class="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-md shadow-sm">
            <span class="font-bold text-gray-800">Final Damage Factor:</span>
            <span id="val_pascc_final_df" class="text-3xl font-extrabold text-green-700">--</span>
        </div>
        <div id="msg_pascc_final_df_note" class="text-sm text-gray-600 mt-2 text-right italic"></div>
    </div>
</div>
